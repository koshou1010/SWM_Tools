import {
  Component,
  AfterViewInit,
  ViewChild,
  ElementRef,
  OnDestroy,
  OnInit,
  Input,
  SimpleChanges,
} from '@angular/core';
import * as echarts from 'echarts';
import { interval, Subscription, timer } from 'rxjs';
import { takeUntil } from 'rxjs/operators';

interface SubObject {
  xAxis: number;
}

interface DataInterface {
  data1: Array<number>;
  data2: Array<number>;
  updateFreq: number;
  yaxisMaxNum: number;
  perWindowMovingDistance: number;
  markAreaData: Array<Array<SubObject>>;
}

@Component({
  selector: 'app-echarts-wrapper',
  templateUrl: './echarts-wrapper.component.html',
  styleUrls: ['./echarts-wrapper.component.scss'],
})
export class EchartsWrapperComponent implements OnInit, OnDestroy {
  @ViewChild('echartsDiv', { static: true }) echartsDiv!: ElementRef;
  @Input() inputChartOptions: any;
  @Input() data!: DataInterface;
  private chartInstance: any;

  _ecgData = [
    19459, 19443, 19425, 19434, 19444, 19431, 19407, 19408, 19417, 19405, 19381,
    19375, 19384, 19379, 19361, 19360, 19380, 19382, 19364, 19361, 19381, 19390,
    19376, 19367, 19385, 19396, 19384, 19370, 19383, 19400, 19396, 19383, 19394,
    19414, 19413, 19393, 19395, 19414, 19418, 19407, 19407, 19427, 19436, 19425,
    19421, 19442, 19451, 19442, 19438, 19455, 19465, 19452, 19436, 19445, 19454,
    19438, 19421, 19426, 19439, 19431, 19412, 19410, 19428, 19428, 19411, 19409,
    19430, 19440, 19434, 19436, 19457, 19465, 19452, 19447, 19478, 19522, 19555,
    19593, 19660, 19709, 19714, 19696, 19645, 19552, 19451, 19451, 19451, 19451,
    19451, 19451, 19451, 19451, 19451, 19451, 19451, 19300, 19331, 19342, 19325,
    19315, 19332, 19345, 19331, 19324, 19345, 19363, 19362, 19359, 19382, 19408,
    19405, 19396, 19418, 19457, 19471, 19463, 19478, 19516, 19531, 19522, 19530,
    19567, 19589, 19591, 19596, 19626, 19651, 19651, 19654, 19683, 19707, 19707,
    19706, 19735, 19765, 19763, 19755, 19778, 19807, 19816, 19814, 19833, 19869,
    19877, 19865, 19872, 19910, 19936, 19941, 19950, 19985, 20007, 19998, 19992,
    20015, 20029, 20023, 20019, 20040, 20057, 20048, 20027, 20028, 20044, 20032,
    20008, 20005, 20018, 20006, 19976, 19960, 19969, 19964, 19937, 19916, 19931,
    19937, 19917, 19897, 19897, 19897, 19873, 19842, 19838, 19840, 19825, 19801,
    19799, 19806, 19791, 19768, 19760, 19770, 19766, 19748, 19747, 19763, 19767,
    19749, 19742, 19755, 19764, 19751, 19740, 19748, 19754, 19745, 19733, 19741,
    19755, 19750, 19735, 19736, 19747, 19744, 19731, 19728, 19743, 19746, 19735,
    19734, 19748, 19755, 19751, 19754, 19775, 19791, 19790, 19792, 19809, 19826,
    19828, 19822, 19834, 19853, 19855, 19850, 19860, 19879, 19883, 19880, 19888,
    19909, 19918, 19914, 19917, 19933, 19938, 19930, 19923, 19933, 19939, 19925,
    19911, 19912, 19910, 19897, 19893, 19921, 19966, 20004, 20031, 20062, 20088,
    20075, 19991, 19892, 19833, 19788, 19747, 19726, 19730, 19742, 19748, 19756,
    19776, 19787, 19781, 19774, 19783, 19792, 19784, 19772, 19777, 19785, 19778,
    19763, 19765, 19775, 19771, 19754, 19750, 19757, 19753, 19740, 19735, 19747,
    19750, 19736, 19729, 19741, 19747, 19737, 19729, 19738, 19748, 19742, 19732,
    19739, 19753, 19750, 19736, 19737, 19748, 19746, 19734, 19733, 19744, 19744,
    19729, 19721, 19729, 19730, 19716, 19702, 19706, 19707, 19693, 19677, 19675,
    19677, 19662, 19642, 19641, 19643, 19633, 19614, 19612, 19618, 19611, 19592,
    19584, 19591, 19588, 19571, 19562, 19569, 19572, 19557, 19546, 19556, 19559,
    19544, 19531, 19536, 19539, 19530, 19517, 19520, 19527, 19519, 19503, 19500,
    19507, 19503, 19486, 19478, 19486, 19483, 19469, 19460, 19468, 19470, 19456,
    19445, 19451, 19454, 19442, 19433, 19439, 19446, 19436, 19422, 19423, 19432,
    19424, 19410, 19408, 19418, 19413, 19399, 19395, 19403, 19401, 19387, 19380,
    19387, 19388, 19378, 19368, 19374, 19377, 19367, 19356, 19363, 19370, 19363,
    19353, 19357, 19368, 19365, 19354, 19356, 19369, 19370, 19358, 19355, 19367,
    19368, 19356, 19349, 19358, 19361, 19349, 19342, 19349, 19354, 19347, 19337,
    19341, 19347, 19339, 19332, 19336, 19345, 19337, 19325, 19325, 19334, 19327,
    19315, 19330, 19376, 19426, 19474, 19521, 19561, 19580, 19562, 19479, 19383,
    19320, 19274, 19243, 19233, 19239, 19247, 19259, 19284, 19305, 19310, 19304,
    19309, 19322, 19323, 19314, 19314, 19325, 19326, 19315, 19309, 19319, 19322,
    19312, 19305, 19311, 19315, 19309, 19301, 19307, 19318, 19315, 19308, 19313,
    19324, 19322, 19315, 19316, 19329, 19331, 19321, 19321, 19331, 19331, 19322,
    19317, 19330, 19334, 19323, 19319, 19327, 19331, 19321, 19310, 19316, 19323,
    19315, 19305, 19307, 19315, 19310, 19296, 19294, 19301, 19297, 19284, 19281,
    19289, 19290, 19278, 19272, 19282, 19286, 19278, 19271, 19279, 19289, 19282,
    19274, 19281, 19289, 19283, 19273, 19276, 19286, 19284, 19273, 19275, 19286,
    19284, 19274, 19270, 19281, 19284, 19275, 19273, 19283, 19287, 19281, 19274,
    19285, 19292, 19287, 19280, 19287, 19296, 19290, 19281, 19287, 19299, 19297,
    19287, 19288, 19299, 19297, 19286, 19283, 19294, 19293, 19282, 19277, 19284,
    19290, 19280, 19272, 19280, 19286, 19280, 19271, 19275, 19284, 19279, 19270,
    19275, 19286, 19284, 19272, 19270, 19282, 19283, 19272, 19268, 19279, 19282,
    19274, 19270, 19281, 19288, 19282, 19276, 19288, 19299, 19293, 19283, 19291,
    19301, 19293, 19282, 19284, 19292, 19289, 19279, 19278, 19290, 19291, 19280,
    19279, 19289, 19291, 19281, 19275, 19284, 19291, 19285, 19274, 19281, 19286,
    19281, 19288, 19331, 19390, 19442, 19483, 19518, 19546, 19529, 19433, 19333,
    19278, 19241, 19206, 19190, 19205, 19226, 19239, 19251, 19273, 19287, 19285,
    19281, 19289, 19297, 19292, 19282, 19290, 19300, 19296, 19286, 19290, 19300,
    19298, 19286, 19285, 19295, 19298, 19288, 19287, 19298, 19302, 19294, 19289,
    19301, 19307, 19302, 19297, 19306, 19317, 19313, 19304, 19310, 19322, 19321,
    19310, 19311, 19322, 19322, 19312, 19312, 19322, 19321, 19309, 19305, 19315,
    19316, 19306, 19297, 19302, 19305, 19295, 19286, 19291, 19296, 19289, 19277,
    19281, 19290, 19284, 19273, 19276, 19287, 19285, 19272, 19269, 19280, 19282,
    19272, 19270, 19280, 19284, 19273, 19268, 19278, 19285, 19276, 19265, 19273,
    19283, 19277, 19269, 19275, 19285, 19281, 19271, 19275, 19286, 19286, 19277,
    19276, 19288, 19291, 19281, 19277, 19289, 19293, 19284, 19279, 19287, 19293,
    19286, 19278, 19285, 19294, 19286, 19275, 19277, 19283, 19280, 19269, 19270,
    19279, 19278, 19267, 19266, 19278, 19279, 19267, 19263, 19276, 19281, 19270,
    19265, 19276, 19282, 19273, 19262, 19269, 19278, 19274, 19264, 19268, 19279,
    19276, 19264, 19265, 19272, 19269, 19257, 19255, 19268, 19271, 19262, 19260,
    19273, 19279, 19270, 19263, 19275, 19284, 19279, 19269, 19273, 19282, 19277,
    19266, 19272, 19282, 19278, 19267, 19268, 19279, 19275, 19263, 19261, 19273,
    19274, 19264, 19260, 19271, 19275, 19265, 19257, 19266, 19270, 19263, 19268,
    19307, 19363, 19413, 19454, 19494, 19525, 19522, 19449, 19344, 19276, 19229,
    19191, 19173, 19183, 19202, 19215, 19230, 19255, 19267, 19265, 19261, 19272,
    19283, 19279, 19271, 19277, 19287, 19283, 19273, 19279, 19289, 19284, 19273,
    19275, 19287, 19290, 19281, 19278, 19288, 19294, 19286, 19285, 19299, 19308,
    19302, 19298, 19308, 19315, 19310, 19303, 19311, 19323, 19322, 19311, 19314,
    19323, 19319, 19309, 19309, 19321, 19321, 19308, 19303, 19314, 19316, 19304,
    19298, 19310, 19314, 19304, 19296, 19305, 19313, 19303, 19295, 19301, 19310,
    19305, 19295, 19299, 19313, 19315, 19304, 19305, 19320, 19325, 19316, 19316,
    19329, 19329, 19320, 19317, 19329, 19336, 19330, 19323, 19328, 19332, 19327,
    19323, 19331, 19341, 19336, 19327, 19331, 19346, 19349, 19343, 19344, 19353,
    19354, 19347, 19348, 19365, 19372, 19366, 19362, 19370, 19375, 19368, 19362,
    19372, 19381, 19376, 19370, 19374, 19382, 19381, 19372, 19373, 19382, 19378,
    19368, 19371, 19386, 19389, 19378, 19370, 19377, 19384, 19379, 19375, 19389,
    19399, 19394, 19382, 19387, 19393, 19390, 19382, 19386, 19397, 19400, 19391,
    19386, 19393, 19392, 19384, 19387, 19400, 19402, 19394, 19390, 19402, 19408,
    19398, 19391, 19402, 19411, 19403, 19393, 19402, 19413, 19412, 19405, 19417,
    19430, 19428, 19417, 19422, 19436, 19437, 19425, 19426, 19438, 19436, 19422,
    19419, 19433, 19435, 19425, 19416, 19425, 19432, 19427, 19418, 19424, 19429,
    19424, 19421, 19430, 19439, 19438, 19427, 19425, 19433, 19443, 19463, 19501,
    19563, 19618, 19648, 19665, 19678, 19630, 19523, 19437, 19396, 19373, 19350,
    19340, 19364, 19390, 19399, 19406, 19425, 19443, 19444, 19435, 19441, 19453,
    19454, 19446, 19446, 19460, 19462, 19457, 19454, 19467, 19475, 19467, 19461,
    19473, 19483, 19477, 19468, 19475, 19486, 19486, 19478, 19484, 19499, 19499,
    19488, 19492, 19503, 19506, 19505, 19510, 19526, 19529, 19521, 19520, 19535,
    19542, 19534, 19527, 19538, 19547, 19537, 19523, 19532, 19546, 19541, 19532,
    19542, 19551, 19541, 19525, 19525, 19534, 19531, 19520, 19521, 19532, 19534,
    19521, 19517, 19533, 19541, 19534, 19529, 19541, 19548, 19541, 19533, 19541,
    19555, 19549, 19538, 19546, 19562, 19564, 19558, 19560, 19572, 19571, 19567,
    19568, 19580, 19583, 19575, 19573, 19587, 19593, 19584, 19582, 19595, 19606,
    19602, 19595, 19606, 19616, 19612, 19607, 19616, 19631, 19626, 19616, 19622,
    19637, 19637, 19628, 19630, 19644, 19648, 19641, 19640, 19656, 19664, 19653,
    19646, 19658, 19671, 19670, 19666, 19676, 19687, 19685, 19680, 19688, 19702,
    19700, 19691, 19695, 19710, 19712, 19705, 19705, 19721, 19728, 19719, 19717,
    19732, 19742, 19733, 19728, 19741, 19751, 19745, 19739, 19750, 19760, 19754,
    19742, 19748, 19763, 19761, 19748, 19750, 19767, 19769, 19758, 19757, 19768,
    19775, 19769, 19767, 19778, 19783, 19774, 19766, 19774, 19781, 19775, 19765,
    19768, 19777, 19771, 19756, 19758, 19768, 19765, 19752, 19751, 19764, 19766,
    19754, 19749, 19759, 19760, 19753, 19748, 19758, 19764, 19754, 19745, 19755,
    19778, 19803, 19838, 19892, 19949, 19975, 19974, 19966, 19908, 19814, 19738,
    19697, 19687, 19671, 19658, 19671, 19701, 19717, 19713, 19710, 19722, 19730,
    19722, 19714, 19721, 19727, 19720, 19706, 19707, 19714, 19703, 19686, 19684,
    19691, 19685, 19668, 19662, 19669, 19669, 19653, 19645, 19654, 19653, 19640,
    19631, 19638, 19643, 19630, 19621, 19626, 19632, 19625, 19615, 19619, 19628,
    19623, 19611, 19610, 19617, 19613, 19599, 19597, 19607, 19605, 19590, 19579,
    19588, 19586, 19572, 19560, 19564, 19565, 19553, 19541, 19542, 19545, 19533,
    19518, 19519, 19528, 19523, 19512, 19515, 19525, 19523, 19511, 19512, 19524,
    19525, 19515, 19510, 19521, 19524, 19511, 19505, 19512, 19520, 19513, 19502,
    19507, 19512, 19506, 19496, 19502, 19509, 19502, 19491, 19492, 19501, 19500,
    19489, 19486, 19497, 19496, 19484, 19480, 19491, 19495, 19484, 19477, 19485,
    19491, 19485, 19477, 19483, 19493, 19488, 19476, 19477, 19486, 19480, 19468,
    19469, 19480, 19478, 19467, 19466, 19476, 19476, 19463, 19460, 19470, 19474,
    19468, 19462, 19469, 19472, 19465, 19456, 19464, 19472, 19468, 19460, 19463,
    19471, 19468, 19456, 19458, 19470, 19470, 19459, 19457, 19466, 19468, 19458,
    19453, 19463, 19468, 19459, 19455, 19464, 19473, 19468, 19460, 19467, 19478,
    19474, 19463, 19469, 19477, 19472, 19462, 19462, 19469, 19466, 19457, 19455,
    19465, 19467, 19457, 19453, 19463, 19464, 19455, 19448, 19455, 19463, 19457,
    19450, 19456, 19462, 19459, 19467, 19509, 19569, 19623, 19661, 19690, 19713,
    19697, 19603, 19500, 19447, 19413, 19382, 19367, 19378, 19400, 19416, 19429,
    19451, 19466, 19464, 19460, 19468, 19477, 19474, 19467, 19473, 19485, 19483,
    19474, 19474, 19484, 19483, 19474, 19475, 19488, 19491, 19482, 19478, 19492,
    19495, 19485, 19479, 19490, 19500, 19497, 19490, 19499, 19509, 19506, 19498,
    19504, 19516, 19512, 19502, 19506, 19518, 19518, 19510, 19508, 19520, 19525,
    19511, 19504, 19511, 19515, 19506, 19496, 19501, 19505, 19496, 19485, 19488,
    19494, 19487, 19475, 19476, 19484, 19480, 19469, 19472, 19485, 19484, 19474,
    19472, 19484, 19489, 19479, 19474, 19485, 19490, 19481, 19475, 19481, 19489,
    19484, 19475, 19480, 19490, 19486, 19475, 19477, 19488, 19486, 19476, 19478,
    19489, 19486, 19476, 19474, 19486, 19491, 19482, 19477, 19488, 19493, 19485,
    19479, 19488, 19495, 19490, 19480, 19485, 19492, 19487, 19476, 19479, 19488,
    19483, 19471, 19471, 19480, 19480, 19471, 19469, 19478, 19481, 19471, 19467,
    19476, 19480, 19471, 19463, 19472, 19478, 19474, 19466, 19469, 19477, 19473,
    19464, 19467, 19476, 19475, 19463, 19460, 19471, 19472, 19462, 19460, 19472,
    19473, 19464, 19461, 19473, 19479, 19468, 19460, 19466, 19471, 19463, 19455,
    19464, 19474, 19471, 19462, 19466, 19480, 19482, 19470, 19469, 19482, 19481,
    19470, 19466, 19477, 19480, 19470, 19466, 19474, 19476, 19468, 19461, 19468,
    19474, 19471, 19464, 19471, 19480, 19476, 19466, 19471, 19480, 19478, 19468,
    19468, 19480, 19496, 19522, 19567, 19632, 19688, 19712, 19721, 19721, 19654,
    19541, 19460, 19426, 19410, 19388, 19379, 19402, 19435, 19452, 19455, 19465,
    19481, 19483, 19477, 19479, 19491, 19495, 19487, 19485, 19498, 19502, 19493,
    19489, 19498, 19504, 19497, 19490, 19497, 19504, 19499, 19491, 19500, 19511,
    19510, 19500, 19502, 19517, 19517, 19504, 19504, 19517, 19521, 19511, 19508,
    19518, 19522, 19513, 19508, 19516, 19521, 19514, 19509, 19517, 19521, 19513,
    19505, 19508, 19513, 19506, 19494, 19493, 19500, 19495, 19482, 19482, 19488,
    19487, 19474, 19465, 19472, 19476, 19465, 19458, 19467, 19472, 19466, 19458,
    19466, 19475, 19471, 19462, 19466, 19475, 19473, 19463, 19465, 19478, 19477,
    19468, 19465, 19477, 19480, 19470, 19466, 19478, 19482, 19472, 19467, 19477,
    19483, 19476, 19471, 19480, 19490, 19485, 19476, 19482, 19492, 19489, 19479,
    19482, 19494, 19493, 19483, 19479, 19487, 19489, 19479, 19473, 19482, 19487,
    19475, 19467, 19475, 19482, 19475, 19467, 19474, 19483, 19477, 19466, 19469,
    19481, 19479, 19469, 19470, 19481, 19482, 19470, 19469, 19480, 19483, 19475,
    19470, 19480, 19486, 19478, 19470, 19479, 19484, 19479, 19471, 19476, 19485,
    19481, 19472, 19476, 19484, 19482, 19471, 19472, 19484, 19484, 19473, 19470,
    19480, 19481, 19471, 19465, 19476, 19482, 19474, 19468, 19479, 19489, 19482,
    19473, 19479, 19489, 19487, 19476, 19481, 19492, 19489, 19477, 19477, 19487,
    19485, 19474, 19470, 19480, 19483, 19473, 19467, 19478, 19483, 19477, 19471,
    19481, 19486, 19478, 19472, 19477, 19483, 19479, 19482, 19514, 19569, 19622,
    19668, 19706, 19736, 19739, 19678, 19570, 19498, 19449, 19412, 19391, 19398,
    19417, 19433, 19447, 19469, 19486, 19483, 19476, 19485, 19499, 19498, 19490,
    19494, 19507, 19505, 19495, 19498, 19510, 19510, 19501, 19499, 19509, 19510,
    19503, 19501, 19512, 19518, 19513, 19509, 19517, 19526, 19521, 19513, 19519,
    19531, 19530, 19522, 19527, 19538, 19537, 19528, 19529, 19540, 19541, 19532,
    19528, 19538, 19540, 19529, 19520, 19529, 19535, 19525, 19515, 19519, 19523,
    19515, 19504, 19507, 19513, 19506, 19494, 19494, 19501, 19497, 19486, 19486,
    19495, 19498, 19491, 19489, 19502, 19508, 19498, 19494, 19506, 19512, 19503,
    19496, 19505, 19514, 19507, 19498, 19503, 19510, 19507, 19500, 19506, 19520,
    19514, 19500, 19501, 19514, 19515, 19503, 19500, 19510, 19515, 19510, 19505,
    19514, 19521, 19517, 19511, 19520, 19528, 19522, 19514, 19520, 19531, 19528,
    19516, 19518, 19529, 19527, 19520, 19524, 19535, 19532, 19520, 19517, 19525,
    19530, 19522, 19518, 19529, 19534, 19523, 19516, 19523, 19530, 19527, 19523,
    19531, 19539, 19530, 19520, 19522, 19534, 19536, 19525, 19526, 19540, 19543,
    19532, 19527, 19536, 19543, 19535, 19528, 19538, 19547, 19539, 19531, 19536,
    19542, 19539, 19531, 19536, 19547, 19543, 19532, 19534, 19545, 19541, 19533,
    19534, 19545, 19546, 19536, 19531, 19538, 19538, 19526, 19523, 19533, 19540,
    19536, 19529, 19535, 19545, 19541, 19531, 19538, 19549, 19542, 19527, 19530,
    19543, 19542, 19528, 19524, 19536, 19537, 19527, 19520, 19531, 19537, 19533,
    19528, 19536, 19538, 19529, 19520, 19529, 19538, 19527, 19517, 19522, 19545,
    19575, 19610, 19663, 19724, 19756, 19762, 19758, 19706, 19607, 19523, 19475,
    19462, 19451, 19442, 19453, 19483, 19506, 19511, 19510, 19520, 19531, 19533,
    19531, 19536, 19547, 19545, 19534, 19539, 19554, 19552, 19543, 19545, 19559,
    19560, 19551, 19549, 19560, 19564, 19557, 19554, 19563, 19567, 19560, 19556,
    19563, 19573, 19570, 19560, 19568, 19584, 19582, 19571, 19573, 19585, 19587,
    19575, 19574, 19589, 19600, 19591, 19587, 19596, 19596, 19584, 19577, 19587,
    19597, 19590, 19579, 19582, 19589, 19583, 19569, 19566, 19574, 19578, 19569,
    19565, 19572, 19569, 19556, 19557, 19572, 19577, 19567, 19556, 19563, 19572,
    19566, 19560, 19570, 19579, 19573, 19567, 19577, 19585, 19573, 19560, 19567,
    19574, 19571, 19562, 19564, 19579, 19583, 19577, 19574, 19582, 19585, 19573,
    19568, 19580, 19584, 19573, 19563, 19570, 19576, 19568, 19561, 19571, 19580,
    19576, 19565, 19566, 19575, 19573, 19563, 19563, 19576, 19577, 19566, 19560,
    19569, 19574, 19563, 19555, 19563, 19570, 19563, 19555, 19561, 19567, 19561,
    19552, 19556, 19567, 19563, 19551, 19554, 19564, 19563, 19556, 19559, 19569,
    19570, 19559, 19559, 19573, 19579, 19572, 19568, 19580, 19588, 19579, 19571,
    19582, 19590, 19585, 19578, 19583, 19591, 19586, 19575, 19580, 19591, 19588,
    19576, 19576, 19591, 19589, 19577, 19575, 19588, 19590, 19579, 19574, 19582,
    19586, 19577, 19568, 19573, 19581, 19575, 19566, 19575, 19586, 19582, 19572,
    19575, 19587, 19584, 19573, 19572, 19581, 19578, 19566, 19560, 19568, 19569,
    19556, 19547, 19556, 19560, 19549, 19541, 19545, 19552, 19547, 19535, 19539,
    19549, 19544, 19534, 19535, 19540, 19536, 19536, 19564, 19617, 19668, 19710,
    19743, 19768, 19770, 19708, 19604, 19531, 19484, 19447, 19422, 19422, 19439,
    19453, 19460, 19477, 19494, 19494, 19487, 19489, 19496, 19495, 19485, 19482,
    19491, 19492, 19484, 19480, 19485, 19484, 19471, 19464, 19471, 19476, 19467,
    19456, 19462, 19470, 19463, 19453, 19457, 19466, 19461, 19451, 19452, 19464,
    19466, 19459, 19458, 19468, 19470, 19460, 19456, 19465, 19469, 19463, 19456,
    19464, 19469, 19462, 19452, 19454, 19458, 19450, 19438, 19437, 19439, 19433,
    19419, 19416, 19421, 19414, 19401, 19396, 19401, 19397, 19385, 19379, 19385,
    19385, 19377, 19371, 19380, 19387, 19380, 19371, 19375, 19382, 19375, 19364,
    19368, 19377, 19374, 19363, 19362, 19371, 19368, 19357, 19356, 19364, 19364,
    19354, 19348, 19356, 19361, 19351, 19342, 19348, 19352, 19346, 19338, 19343,
    19352, 19346, 19334, 19337, 19345, 19341, 19331, 19330, 19340, 19338, 19325,
    19322, 19331, 19331, 19321, 19318, 19322, 19322, 19312, 19305, 19311, 19318,
    19311, 19303, 19308, 19312, 19305, 19294, 19295, 19306, 19303, 19293, 19294,
    19304, 19305, 19293, 19290, 19299, 19300, 19291, 19288, 19297, 19300, 19290,
    19281, 19289, 19296, 19291, 19281, 19286, 19292, 19286, 19277, 19281, 19290,
    19285, 19273, 19271, 19281, 19279, 19268, 19268, 19277, 19278, 19268, 19263,
    19275, 19281, 19276,
  ];
  _ecgData2 = [
    19273, 19280, 19288, 19287, 19277, 19281, 19289, 19285, 19275, 19278, 19285,
    19280, 19268, 19268, 19279, 19279, 19270, 19266, 19275, 19278, 19270, 19266,
    19276, 19283, 19275, 19268, 19272, 19279, 19274, 19274, 19311, 19364, 19414,
    19464, 19503, 19532, 19527, 19459, 19350, 19277, 19230, 19196, 19179, 19180,
    19188, 19199, 19220, 19247, 19260, 19259, 19255, 19266, 19278, 19274, 19268,
    19276, 19286, 19284, 19278, 19281, 19291, 19288, 19278, 19281, 19289, 19289,
    19280, 19279, 19289, 19291, 19283, 19280, 19291, 19297, 19288, 19282, 19291,
    19303, 19296, 19288, 19294, 19303, 19299, 19292, 19299, 19309, 19306, 19296,
    19297, 19308, 19309, 19296, 19290, 19300, 19301, 19292, 19288, 19294, 19295,
    19284, 19273, 19276, 19282, 19271, 19260, 19263, 19270, 19265, 19253, 19253,
    19264, 19262, 19252, 19253, 19262, 19262, 19254, 19253, 19262, 19265, 19256,
    19249, 19257, 19265, 19258, 19249, 19258, 19265, 19257, 19250, 19258, 19268,
    19262, 19254, 19256, 19266, 19265, 19257, 19259, 19269, 19272, 19265, 19263,
    19274, 19277, 19271, 19268, 19278, 19285, 19276, 19267, 19276, 19280, 19271,
    19264, 19270, 19279, 19271, 19260, 19262, 19273, 19269, 19258, 19256, 19266,
    19267, 19258, 19252, 19261, 19265, 19259, 19254, 19261, 19264, 19256, 19248,
    19253, 19260, 19253, 19246, 19253, 19261, 19257, 19247, 19250, 19262, 19259,
    19248, 19245, 19256, 19258, 19251, 19248, 19259, 19265, 19257, 19248, 19255,
    19261, 19254, 19246, 19250, 19257, 19251, 19242, 19246, 19255, 19252, 19243,
    19249, 19260, 19261, 19254, 19253, 19265, 19268, 19258, 19253, 19262, 19265,
    19257, 19252, 19258, 19261, 19253, 19244, 19250, 19256, 19250, 19243, 19249,
    19258, 19255, 19245, 19247, 19256, 19254, 19244, 19244, 19251, 19255, 19265,
    19299, 19362, 19425, 19470, 19493, 19513, 19501, 19408, 19294, 19231, 19204,
    19181, 19159, 19166, 19193, 19214, 19225, 19241, 19259, 19263, 19259, 19263,
    19276, 19279, 19272, 19271, 19281, 19289, 19285, 19280, 19287, 19292, 19288,
    19283, 19290, 19298, 19293, 19287, 19297, 19308, 19307, 19302, 19304, 19311,
    19310, 19306, 19310, 19321, 19319, 19311, 19310, 19323, 19328, 19319, 19318,
    19328, 19337, 19334, 19328, 19334, 19340, 19336, 19330, 19334, 19342, 19338,
    19327, 19326, 19333, 19331, 19318, 19314, 19321, 19318, 19306, 19299, 19303,
    19305, 19301, 19294, 19301, 19306, 19298, 19291, 19298, 19307, 19302, 19294,
    19298, 19306, 19304, 19302, 19306, 19314, 19312, 19304, 19302, 19311, 19314,
    19305, 19301, 19309, 19315, 19312, 19306, 19312, 19318, 19313, 19308, 19316,
    19322, 19320, 19313, 19313, 19313, 19313, 19313, 19313, 19313, 19313, 19313,
    19313, 19313, 19313, 19313, 19313, 19313, 19313, 19333, 19324, 19320, 19330,
    19331, 19322, 19318, 19328, 19330, 19321, 19315, 19323, 19332, 19324, 19315,
    19321, 19326, 19323, 19321, 19324, 19333, 19335, 19327, 19323, 19332, 19335,
    19330, 19325, 19335, 19341, 19334, 19325, 19329, 19335, 19335, 19330, 19332,
    19338, 19329, 19319, 19330, 19343, 19339, 19330, 19330, 19342, 19342, 19332,
    19330, 19341, 19347, 19341, 19336, 19342, 19348, 19342, 19335, 19342, 19348,
    19342, 19335, 19344, 19355, 19351, 19343, 19348, 19356, 19355, 19348, 19354,
    19364, 19362, 19350, 19346, 19355, 19358, 19352, 19347, 19353, 19355, 19344,
    19339, 19353, 19357, 19349, 19344, 19353, 19363, 19360, 19348, 19349, 19360,
    19361, 19362, 19388, 19439, 19490, 19537, 19578, 19605, 19604, 19544, 19448,
    19383, 19340, 19306, 19281, 19281, 19300, 19319, 19335, 19352, 19367, 19365,
    19362, 19372, 19387, 19389, 19380, 19380, 19393, 19396, 19387, 19388, 19400,
    19409, 19405, 19399, 19411, 19419, 19409, 19401, 19415, 19425, 19416, 19407,
    19416, 19429, 19427, 19420, 19426, 19434, 19430, 19419, 19424, 19440, 19443,
    19434, 19433, 19445, 19451, 19448, 19445, 19456, 19462, 19456, 19451, 19460,
    19467, 19460, 19454, 19459, 19465, 19460, 19451, 19451, 19458, 19453, 19442,
    19441, 19448, 19451, 19444, 19442, 19450, 19453, 19444, 19442, 19451, 19456,
    19450, 19444, 19452, 19459, 19454, 19445, 19451, 19459, 19458, 19452, 19454,
    19465, 19463, 19454, 19457, 19466, 19467, 19459, 19459, 19473, 19478, 19470,
    19467, 19476, 19485, 19478, 19470, 19478, 19487, 19482, 19474, 19480, 19491,
    19489, 19481, 19483, 19491, 19491, 19482, 19483, 19495, 19494, 19487, 19483,
    19490, 19494, 19485, 19480, 19489, 19495, 19489, 19482, 19487, 19493, 19488,
    19478, 19480, 19490, 19486, 19476, 19476, 19485, 19484, 19473, 19473, 19485,
    19487, 19477, 19471, 19479, 19483, 19474, 19469, 19478, 19483, 19476, 19467,
    19473, 19480, 19474, 19461, 19464, 19474, 19471, 19461, 19461, 19469, 19467,
    19457, 19452, 19458, 19456, 19444, 19437, 19443, 19442, 19431, 19424, 19433,
    19437, 19430, 19422, 19428, 19436, 19429, 19420, 19423, 19431, 19425, 19413,
    19411, 19418, 19415, 19402, 19397, 19401, 19397, 19385, 19374, 19379, 19380,
    19369, 19360, 19365, 19367, 19357, 19349, 19352, 19359, 19353, 19341, 19340,
    19346, 19344, 19344, 19370, 19418, 19468, 19512, 19548, 19576, 19579, 19524,
    19423, 19346, 19292, 19252, 19224, 19223, 19241, 19257, 19267, 19283, 19295,
    19295, 19286, 19290, 19298, 19296, 19287, 19288, 19299, 19297, 19286, 19283,
    19291, 19293, 19281, 19273, 19281, 19283, 19273, 19267, 19274, 19277, 19269,
    19261, 19266, 19275, 19273, 19260, 19264, 19274, 19274, 19267, 19269, 19279,
    19280, 19271, 19267, 19278, 19282, 19271, 19263, 19272, 19280, 19273, 19265,
    19272, 19278, 19270, 19259, 19258, 19264, 19258, 19245, 19241, 19245, 19238,
    19223, 19219, 19225, 19221, 19206, 19200, 19208, 19207, 19195, 19186, 19194,
    19202, 19194, 19184, 19190, 19198, 19191, 19179, 19182, 19189, 19184, 19174,
    19175, 19185, 19181, 19167, 19165, 19176, 19179, 19166, 19161, 19170, 19174,
    19165, 19158, 19167, 19171, 19162, 19155, 19159, 19163, 19156, 19146, 19151,
    19158, 19152, 19141, 19142, 19150, 19145, 19133, 19130, 19137, 19134, 19123,
    19115, 19122, 19122, 19108, 19099, 19107, 19109, 19098, 19090, 19096, 19102,
    19096, 19085, 19089, 19099, 19092, 19080, 19081, 19089, 19085, 19075, 19075,
    19085, 19083, 19073, 19070, 19078, 19082, 19070, 19062, 19069, 19075, 19067,
    19057, 19063, 19072, 19065, 19056, 19059, 19066, 19064, 19056, 19055, 19060,
    19060, 19052, 19053, 19066, 19069, 19060, 19060, 19071, 19078, 19071, 19067,
    19076, 19081, 19072, 19065, 19071, 19077, 19071, 19063, 19067, 19077, 19075,
    19065, 19069, 19080, 19078, 19066, 19067, 19079, 19081, 19072, 19069, 19078,
    19080, 19069, 19070, 19099, 19147, 19196, 19249, 19303, 19338, 19344, 19308,
    19215, 19124, 19062, 19019, 18999, 18998, 19000, 19009, 19031, 19063, 19076,
    19075, 19077, 19089, 19094, 19088, 19086, 19097, 19106, 19101, 19094, 19102,
    19111, 19107, 19098, 19102, 19110, 19107, 19100, 19102, 19112, 19114, 19107,
    19107, 19118, 19121, 19113, 19108, 19118, 19124, 19121, 19117, 19125, 19131,
    19124, 19117, 19124, 19133, 19131, 19122, 19123, 19134, 19133, 19124, 19124,
    19132, 19131, 19120, 19116, 19123, 19120, 19107, 19102, 19109, 19107, 19097,
    19087, 19091, 19094, 19084, 19073, 19078, 19083, 19076, 19066, 19070, 19080,
    19078, 19072, 19073, 19081, 19080, 19069, 19067, 19077, 19078, 19069, 19065,
    19075, 19080, 19071, 19063, 19072, 19079, 19074, 19066, 19074, 19083, 19081,
    19074, 19078, 19087, 19085, 19077, 19076, 19088, 19089, 19081, 19081, 19095,
    19098, 19090, 19090, 19100, 19106, 19097, 19089, 19101, 19111, 19104, 19093,
    19094, 19099, 19097, 19089, 19092, 19099, 19094, 19082, 19085, 19095, 19092,
    19082, 19076, 19088, 19091, 19084, 19081, 19087, 19088, 19081, 19083, 19092,
    19098, 19093, 19086, 19092, 19100, 19097, 19088, 19090, 19099, 19098, 19090,
    19091, 19103, 19105, 19094, 19089, 19097, 19103, 19098, 19093, 19102, 19106,
    19099, 19093, 19100, 19105, 19102, 19093, 19095, 19100, 19098, 19093, 19093,
    19098, 19099, 19096, 19100, 19111, 19109, 19101, 19101, 19110, 19113, 19105,
    19098, 19107, 19112, 19103, 19091, 19097, 19107, 19102, 19089, 19091, 19096,
    19090, 19082, 19085, 19095, 19094, 19085, 19086, 19094, 19094, 19086, 19087,
    19093, 19092, 19095, 19122, 19176, 19235, 19282, 19312, 19339, 19351, 19294,
    19183, 19107, 19064, 19028, 18998, 18997, 19024, 19044, 19055, 19070, 19091,
    19101, 19095, 19094, 19107, 19109, 19102, 19100, 19114, 19118, 19108, 19106,
    19118, 19127, 19122, 19117, 19123, 19132, 19129, 19119, 19123, 19135, 19136,
    19128, 19126, 19137, 19143, 19136, 19131, 19141, 19145, 19139, 19139, 19149,
    19154, 19146, 19143, 19154, 19164, 19162, 19154, 19156, 19163, 19160, 19153,
    19160, 19173, 19172, 19159, 19157, 19162, 19160, 19147, 19139, 19147, 19145,
    19133, 19129, 19139, 19143, 19133, 19127, 19130, 19131, 19126, 19123, 19131,
    19137, 19138, 19130, 19130, 19142, 19140, 19130, 19129, 19139, 19139, 19131,
    19131, 19143, 19147, 19141, 19137, 19149, 19155, 19147, 19139, 19146, 19153,
    19148, 19140, 19143, 19154, 19156, 19146, 19145, 19155, 19156, 19145, 19143,
    19153, 19155, 19152, 19154, 19164, 19166, 19157, 19149, 19158, 19163, 19155,
    19147, 19154, 19163, 19156, 19146, 19152, 19161, 19156, 19142, 19145, 19157,
    19158, 19148, 19148, 19158, 19161, 19151, 19144, 19155, 19156, 19147, 19144,
    19151, 19160, 19158, 19149, 19154, 19161, 19157, 19150, 19156, 19167, 19163,
    19154, 19156, 19167, 19162, 19149, 19153, 19169, 19174, 19166, 19160, 19171,
    19176, 19166, 19163, 19173, 19180, 19173, 19168, 19176, 19186, 19180, 19175,
    19176, 19180, 19179, 19172, 19175, 19185, 19184, 19174, 19173, 19183, 19186,
    19180, 19178, 19191, 19195, 19184, 19181, 19190, 19196, 19190, 19185, 19194,
    19204, 19201, 19197, 19203, 19209, 19207, 19201, 19201, 19208, 19208, 19199,
    19196, 19206, 19207, 19197, 19191, 19202, 19205, 19195, 19190, 19198, 19204,
    19198, 19192, 19202, 19210, 19204, 19194, 19196, 19206, 19204, 19194, 19199,
    19227, 19263, 19300, 19350, 19408, 19438, 19445, 19432, 19371, 19287, 19213,
    19164, 19149, 19144, 19140, 19150, 19177, 19177, 19177, 19177, 19177, 19177,
    19177, 19177, 19177, 19177, 19177, 19177, 19177, 19177, 19177, 19177, 19231,
    19233, 19241, 19245, 19240, 19237, 19246, 19252, 19243, 19238, 19249, 19254,
    19249, 19242, 19248, 19255, 19252, 19246, 19252, 19260, 19257, 19250, 19253,
    19267, 19267, 19258, 19256, 19267, 19272, 19264, 19263, 19272, 19278, 19271,
    19266, 19274, 19280, 19271, 19260, 19263, 19272, 19266, 19254, 19253, 19258,
    19254, 19242, 19240, 19245, 19240, 19229, 19224, 19229, 19229, 19218, 19212,
    19219, 19224, 19218, 19210, 19213, 19216, 19208, 19198, 19203, 19209, 19205,
    19191, 19193, 19201, 19197, 19186, 19182, 19188, 19188, 19177, 19175, 19184,
    19185, 19173, 19167, 19173, 19180, 19172, 19163, 19169, 19172, 19163, 19153,
    19155, 19159, 19154, 19145, 19143, 19147, 19143, 19133, 19133, 19139, 19137,
    19125, 19119, 19127, 19129, 19120, 19115, 19121, 19125, 19113, 19101, 19107,
    19113, 19107, 19096, 19098, 19103, 19097, 19087, 19090, 19097, 19093, 19082,
    19082, 19088, 19087, 19076, 19072, 19080, 19082, 19072, 19065, 19071, 19074,
    19067, 19059, 19064, 19070, 19063, 19054, 19059, 19066, 19062, 19053, 19054,
    19061, 19059, 19049, 19048, 19056, 19056, 19047, 19045, 19052, 19053, 19046,
    19040, 19042, 19047, 19039, 19030, 19035, 19041, 19035, 19028, 19031, 19035,
    19029, 19017, 19019, 19030, 19031, 19025, 19022, 19032, 19038, 19033, 19031,
    19041, 19040, 19029, 19022, 19027, 19032, 19025, 19016, 19018, 19021, 19015,
    19005, 19008, 19014, 19010, 18998, 18997, 19007, 19006, 18994, 18990, 19001,
    19003, 18995, 18991, 19001, 19004, 18992, 18987, 19009, 19047, 19087, 19135,
    19195, 19237, 19247, 19232, 19172, 19075, 18997, 18941, 18915, 18908, 18898,
    18901, 18923, 18954, 18968, 18966, 18967, 18982, 18988, 18981, 18977, 18987,
    18995, 18988, 18981, 18988, 18996, 18992, 18986, 18989, 18997, 18996, 18987,
    18988, 18998, 18999, 18987, 18987, 18998, 19001, 18995, 18992, 19002, 19006,
    19001, 18997, 19004, 19011, 19007, 18999, 19008, 19017, 19014, 19006, 19009,
    19016, 19014, 19006, 19007, 19016, 19015, 19004, 19001, 19008, 19007, 18996,
    18991, 18998, 19001, 18990, 18977, 18979, 18984, 18975, 18962, 18966, 18973,
    18968, 18958, 18960, 18969, 18966, 18957, 18957, 18965, 18961, 18951, 18950,
    18958, 18957, 18948, 18942, 18950, 18953, 18946, 18941, 18949, 18955, 18951,
    18943, 18949, 18955, 18951, 18944, 18949, 18959, 18958, 18948, 18950, 18961,
    18959, 18950, 18950, 18960, 18964, 18957, 18954, 18962, 18966, 18960, 18954,
    18960, 18966, 18961, 18953, 18957, 18965, 18959, 18950, 18952, 18960, 18956,
    18945, 18945, 18954, 18952, 18941, 18938, 18948, 18952, 18945, 18939, 18946,
    18949, 18942, 18937, 18942, 18948, 18943, 18935, 18941, 18949, 18942, 18933,
    18936, 18943, 18942, 18935, 18936, 18946, 18943, 18931, 18929, 18939, 18944,
    18935, 18929, 18939, 18945, 18937, 18931, 18937, 18942, 18938, 18930, 18935,
    18943, 18936, 18927, 18932, 18939, 18936, 18924, 18923, 18932, 18933, 18927,
    18928, 18939, 18944, 18940, 18938, 18948, 18951, 18942, 18933, 18938, 18944,
    18938, 18929, 18931, 18937, 18933, 18922, 18922, 18931, 18929, 18919, 18919,
    18927, 18926, 18916, 18912, 18925, 18927, 18917, 18914, 18923, 18926, 18918,
    18909, 18919, 18945, 18980, 19028, 19090, 19146, 19170, 19174, 19159, 19084,
    18977, 18898, 18858, 18846, 18834, 18827, 18844, 18877, 18898, 18904, 18907,
    18917, 18925, 18920, 18916, 18927, 18937, 18932, 18926, 18932, 18940, 18938,
    18929, 18931, 18941, 18941, 18932, 18932, 18942, 18944, 18937, 18933, 18945,
    18947, 18941, 18940, 18949, 18954, 18948, 18943, 18953, 18963, 18960, 18952,
    18956, 18966, 18963, 18957, 18960, 18971, 18970, 18960, 18960, 18971, 18975,
    18966, 18959, 18966, 18968, 18958, 18950, 18957, 18958, 18947, 18936, 18937,
    18942, 18935, 18925, 18925, 18930, 18927, 18919, 18920, 18932, 18930, 18922,
    18923, 18934, 18934, 18924, 18924, 18933, 18936, 18923, 18914, 18923, 18927,
    18921, 18914, 18919, 18927, 18924, 18917, 18923, 18933, 18931, 18919, 18919,
    18933, 18935, 18923, 18922, 18935, 18935, 18926, 18922, 18932, 18937, 18931,
    18925, 18937, 18948, 18940, 18931, 18937, 18943, 18935, 18926, 18928, 18938,
    18938, 18928, 18928, 18936, 18934, 18926, 18923, 18932, 18933, 18924, 18920,
    18928, 18933, 18925, 18917, 18926, 18933, 18927, 18922, 18925, 18929, 18927,
    18918, 18924, 18934, 18929, 18919, 18922, 18933, 18933, 18924, 18924, 18933,
    18934, 18926, 18921, 18929, 18936, 18932, 18929, 18938, 18944, 18938, 18933,
    18943, 18953, 18948, 18939, 18947, 18960, 18959, 18950, 18950, 18959, 18957,
    18950, 18952, 18964, 18968, 18960, 18952, 18959, 18963, 18956, 18949, 18956,
    18963, 18961, 18955, 18963, 18978, 18979, 18970, 18972, 18982, 18979, 18966,
    18967, 18978, 18977, 18966, 18963, 18973, 18970, 18961, 18956, 18964, 18969,
    18960, 18954, 18961, 18967, 18960, 18951, 18957, 18965, 18960, 18952, 18960,
    18968, 18966, 18958, 18970, 19015, 19065, 19112, 19163, 19206, 19222, 19207,
    19138, 19048, 18978, 18924, 18892, 18885, 18897, 18909, 18921, 18943, 18961,
    18966, 18968, 18975, 18985, 18986, 18981, 18987, 18999, 18998, 18989, 18992,
    19006, 19009, 18999, 18996, 19005, 19009, 19004, 19000, 19009, 19016, 19009,
    19002, 19013, 19025, 19021, 19013, 19018, 19030, 19030, 19022, 19026, 19035,
    19035, 19029, 19030, 19043, 19046, 19038, 19039, 19055, 19066, 19057, 19046,
    19054, 19066, 19062, 19051, 19055, 19064, 19060, 19048, 19046, 19057, 19056,
    19045, 19042, 19048, 19044, 19033, 19033, 19046, 19051, 19039, 19031, 19040,
    19050, 19043, 19035, 19048, 19056, 19042, 19028, 19036, 19048, 19048, 19041,
    19042, 19050, 19048, 19037, 19036, 19048, 19052, 19048, 19047, 19059, 19063,
    19053, 19051, 19063, 19069, 19065, 19060, 19065, 19073, 19072, 19065, 19070,
    19085, 19079, 19069, 19075, 19088, 19092, 19082, 19081, 19094, 19096, 19089,
    19091, 19104, 19109, 19101, 19098, 19110, 19118, 19109, 19101, 19111, 19123,
    19121, 19114, 19122, 19133, 19131, 19123, 19125, 19138, 19137, 19129, 19132,
    19144, 19147, 19141, 19140, 19153, 19161, 19155, 19152, 19164, 19172, 19166,
    19161, 19172, 19180, 19176, 19171, 19180, 19192, 19188, 19179, 19183, 19193,
    19193, 19183, 19183, 19195, 19199, 19189, 19186, 19199, 19206, 19198, 19195,
    19204, 19208, 19200, 19193, 19202, 19212, 19206, 19195, 19201, 19214, 19212,
    19200, 19201, 19213, 19214, 19205, 19207, 19222, 19229, 19223, 19221, 19230,
    19230, 19219, 19212, 19220, 19225, 19214, 19204, 19208, 19214, 19208, 19197,
    19199, 19207, 19199, 19183, 19185, 19194, 19189, 19175, 19169, 19174, 19173,
    19160, 19153, 19160, 19160, 19144, 19132, 19140, 19153, 19172, 19207, 19263,
    19318, 19345, 19348, 19343, 19290, 19188, 19099, 19049, 19027, 19008, 18997,
    19008, 19034, 19053, 19054, 19053, 19065, 19070, 19062, 19054, 19062, 19068,
    19061, 19053, 19058, 19064, 19060, 19048, 19050, 19059, 19057, 19046, 19044,
    19051, 19048, 19037, 19034, 19043, 19044, 19034, 19029, 19038, 19042, 19032,
    19023, 19027, 19035, 19029, 19020, 19026, 19037, 19035, 19022, 19023, 19033,
    19029, 19019, 19018, 19027, 19026, 19015, 19013, 19020, 19019, 19005, 18997,
    19003, 19004, 18992, 18980, 18983, 18985, 18974, 18958, 18959, 18965, 18959,
    18947, 18948, 18955, 18948, 18934, 18935, 18943, 18941, 18930, 18926, 18933,
    18934, 18925, 18921, 18930, 18932, 18923, 18915, 18919, 18925, 18916, 18909,
    18915, 18923, 18922, 18913, 18913, 18920, 18916, 18905, 18906, 18914, 18913,
    18903, 18902, 18910, 18913, 18904, 18901, 18910, 18915, 18907, 18899, 18904,
    18909, 18902, 18894, 18896, 18903, 18898, 18887, 18887, 18897, 18896, 18885,
    18884, 18892, 18892, 18884, 18878, 18883, 18885, 18877, 18870, 18878, 18883,
    18874, 18866, 18871, 18877, 18871, 18864, 18868, 18875, 18870, 18859, 18860,
    18869, 18867, 18858, 18856, 18865, 18866, 18856, 18851, 18860, 18862, 18853,
    18849, 18856, 18861, 18850, 18840, 18848, 18858, 18853, 18844, 18846, 18852,
    18846, 18835, 18835, 18846, 18847, 18838, 18839, 18851, 18853, 18848, 18848,
    18858, 18861, 18851, 18844, 18850, 18854, 18846, 18837, 18840, 18847, 18840,
    18828, 18830, 18839, 18835, 18824, 18823, 18831, 18831, 18824, 18822, 18831,
    18834, 18825, 18822,
  ];
  _breathData = [
    462392, 462586, 462715, 462816, 462836, 462801, 462751, 462796, 462903,
    463008, 463133, 463226, 463236, 463288, 463290, 463333, 463381, 463483,
    463611, 463678, 1, 463851, 463880, 463849, 463823, 463831, 463773, 463804,
    463805, 463793, 463836, 463891, 463947, 463936, 463913, 463878, 463803,
    463708, 463645, 463628, 463579, 463531, 463464, 463341, 463206, 463083,
    462926, 462821, 462678, 462599, 462583, 462561, 462557, 462558, 462555,
    462583, 462557, 462568, 462501, 462404, 462402, 462362, 462251, 462171,
    462041, 461995, 461974, 461910, 461881, 461817, 461859, 461846, 461851,
    461793, 461783, 461773, 461722, 461713, 461736, 461694, 461738, 461664,
    461611, 461575, 461572, 461540, 461608, 461606, 461658, 461683, 461757,
    461764, 461793, 461742, 461717, 461704, 461702, 461643, 461567, 461423,
    461364, 461247, 461143, 461048, 460967, 460873, 460668, 460559, 460416,
    460279, 460181, 460091, 460047, 460018, 460018, 459933, 459902, 459900,
    459896, 459917, 459868, 459866, 459847, 459773, 459753, 459736, 459780,
    459805, 459839, 459799, 459759, 459707, 459636, 459614, 459622, 459636,
    459696, 459649, 459742, 459742, 459778, 459763, 459644, 459576, 459473,
    459407, 459269, 459156, 459059, 458986, 458866, 458798, 458754, 458679,
    458596, 458542, 458490, 458493, 458516, 458495, 458556, 458553, 458568,
    458535, 458394, 458316, 458270, 458227, 458184, 458153, 458120, 458118,
    457973, 457896, 457759, 457711, 457658, 457634, 457605, 457611, 457542,
    457458, 457418, 457368, 457313, 457281, 457244, 457131, 457124, 457086,
    457073, 457073, 457068, 457047, 457087, 457110, 457104, 457131, 457121,
    457133, 457133, 457152, 457170, 457148, 457141, 457119, 457171, 457218,
    457236, 457265, 457188, 457253, 457201, 457179, 457086, 457014, 456881,
    456787, 456763, 456698, 456615, 456560, 456571, 456558, 456555, 456546,
    456557, 456568, 456543, 456593, 456563, 456556, 456567, 456566, 456566,
    456579, 456593, 456603, 456559, 456550, 456588, 456574, 456593, 456600,
    456598, 456619, 456607, 456613, 456587, 456582, 456586, 456553, 456593,
    456605, 456604, 456604, 456604, 456591, 456565, 456536, 456604, 456546,
    456561, 456582, 456538, 456565, 456544, 456541, 456526, 456538, 456528,
    456459, 456472, 456503, 456469, 456487, 456464, 456469, 456428, 456384,
    456398, 456403, 456358, 456346, 456326, 456335, 456310, 456327, 456301,
    456273, 456284, 456264, 456227, 456215, 456199, 456178, 456164, 456098,
    456092, 456076, 456031, 456049, 456003, 455960, 455936, 455957, 455921,
    455907, 455920, 455899, 455879, 455862, 455858, 455846, 455832, 455809,
    455799, 455779, 455766, 455708, 455716, 455764, 455713, 455711, 455667,
    455696, 455651, 455662, 455634, 455642, 455608, 455604, 455578, 455614,
    455583, 455574, 455529, 455508, 455548, 455538, 455584, 455548, 455556,
    455523, 455578, 455556, 455558, 455586, 455631, 455586, 455640, 455608,
    455649, 455683, 455649, 455673, 455630, 455617, 455639, 455628, 455544,
    455588, 455540, 455533, 455511, 455496, 455458, 455487, 455454, 455507,
    455493, 455491, 455478, 455502, 455530, 455531, 455524, 455543, 455544,
    455589, 455570, 455549, 455571, 455557, 455547, 455578, 455583, 455568,
    455534, 455498, 455543, 455519, 455488, 455513, 455545, 455519, 455485,
    455505, 455461, 455474, 455469, 455514, 455474, 455471, 455449, 455454,
    455496, 455481, 455474, 455444, 455474, 455462, 455461, 455445, 455464,
    455475, 455474, 455468, 455474, 455461, 455423, 455423, 455409, 455393,
    455383, 455423, 455390, 455372, 455384, 455371, 455361, 455344, 455363,
    455342, 455306, 455318, 455295, 455321, 455288, 455297, 455359, 455331,
    455325, 455286, 455306, 455329, 455287, 455340, 455304, 455276, 455259,
    455285, 455264, 455301, 455290, 455301, 455314, 455298, 455295, 455251,
    455260, 455225, 455203, 455206, 455178, 455197, 455201, 455149, 455158,
    455143, 455118, 455119, 455106, 455106, 455078, 455046, 455036, 455037,
    455022, 455020, 455012, 455006, 455034, 455007, 455016, 455028, 455033,
    455033, 455043, 455038, 455044, 455076, 455041, 455083, 455064, 455044,
    455046, 455017, 455046, 455048,
  ];
  _breathDat2 = [
    455008, 454983, 455016, 454966, 454957, 454913, 454930, 454928, 454914,
    454847, 454863, 454910, 454904, 454912, 454915, 454895, 454893, 454864,
    454906, 454860, 454869, 454873, 454893, 454903, 454927, 454951, 454967,
    454914, 454918, 454936, 454937, 454944, 454969, 454948, 454927, 454935,
    454948, 454915, 454901, 454916, 454917, 454901, 454914, 454886, 454889,
    454923, 454913, 454898, 454892, 454941, 454887, 454881, 454926, 454884,
    454880, 454853, 454880, 454879, 454849, 454899, 454896, 454888, 454902,
    454871, 454913, 454888, 454928, 454898, 454878, 454877, 454872, 454848,
    454867, 454863, 454829, 454823, 454834, 454825, 454789, 454786, 454802,
    454754, 454801, 454758, 454790, 454791, 454768, 454784, 454752, 454746,
    454721, 454747, 454744, 454739, 454721, 454723, 454708, 454711, 454724,
    454703, 454697, 454723, 454767, 454784, 454756, 454739, 454731, 454709,
    454726, 454708, 454706, 454669, 454725, 454664, 454690, 454644, 454645,
    454638, 454643, 454619, 454634, 454644, 454622, 454592, 454598, 454601,
    454572, 454592, 454594, 454589, 454604, 454569, 454552, 454571, 454579,
    454577, 454608, 454579, 454549, 454567, 454599, 454600, 454604, 454598,
    454608, 454614, 454564, 454583, 454579, 454554, 454576, 454547, 454532,
    454529, 454539, 454523, 454515, 454522, 454490, 454496, 454481, 454479,
    454466, 454468, 454464, 454470, 454455, 454431, 454422, 454434, 454409,
    454445, 454431, 454428, 454422, 454401, 454400, 454377, 454394, 454396,
    454380, 454400, 454391, 454386, 454342, 454393, 454383, 454342, 454416,
    454361, 454403, 454356, 454331, 454337, 454379, 454332, 454356, 454325,
    454341, 454313, 454297, 454252, 454272, 454304, 454301, 454272, 454262,
    454262, 454244, 454276, 454224, 454244, 454256, 454273, 454257, 454269,
    454256, 454248, 454284, 454279, 454269, 454269, 454274, 454263, 454240,
    454226, 454251, 454205, 454175, 454221, 454185, 454207, 454166, 454235,
    454209, 454131, 454181, 454114, 454123, 454150, 454110, 454121, 454120,
    454123, 454134, 454139, 454147, 454132, 454131, 454139, 454116, 454169,
    454157, 454130, 454136, 454116, 454146, 454157, 454123, 454139, 454155,
    454151, 454118, 454127, 454144, 454156, 454165, 454196, 454169, 454176,
    454166, 454189, 454176, 454178, 454203, 454168, 454138, 454167, 454155,
    454103, 454131, 454142, 454121, 454126, 454104, 454148, 454086, 454116,
    454130, 454094, 454102, 454125, 454111, 454088, 454098, 454107, 454041,
    454080, 454085, 454051, 454090, 454045, 454071, 454107, 454056, 454077,
    454058, 454094, 454118, 454089, 454101, 454065, 454110, 454074, 454099,
    454086, 454149, 454095, 454109, 454101, 454087, 454116, 454072, 454105,
    454088, 454113, 454079, 454088, 454060, 454068, 454051, 454045, 454056,
    454054, 454043, 454024, 453978, 454016, 454000, 453961, 453988, 453980,
    453954, 453967, 453964, 453953, 453952, 453953, 453967, 453971, 453970,
    453992, 453976, 453973, 453939, 453968, 453998, 453956, 453953, 453937,
    453979, 453991, 453953, 453987, 453953, 453973, 453969, 453983, 453956,
    453940, 453918, 453919, 453943, 453968, 453945, 453941, 453916, 453899,
    453904, 453880, 453914, 453914, 453888, 453896, 453929, 453906, 453912,
    453908, 453883, 453919, 453908, 453872, 453913, 453866, 453853, 453874,
    453858, 453880, 453858, 453865, 453850, 453873, 453868, 453863, 453869,
    453853, 453858, 453818, 453824, 453828, 453836, 453794, 453801, 453803,
    453798, 453838, 453831, 453836, 453829, 453794, 453814, 453821, 453831,
    453848, 453834, 453883, 453874, 453843, 453851, 453888, 453873, 453888,
    453883, 453863, 453864, 453914, 453911, 453912, 453920, 453888, 453911,
    453900, 453952, 453961, 453924, 453883, 453917, 453915, 453894, 453897,
    453851, 453890, 453891, 453868, 453875, 453869, 453847, 453838, 453829,
    453822, 453809, 453829, 453837, 453876, 453841, 453806, 453837, 453842,
    453818, 453832, 453840, 453819, 453786, 453821, 453778, 453774, 453812,
    453823, 453817, 453813, 453818, 453819, 453811, 453788, 453813, 453811,
    453815, 453810, 453813, 453801, 453790, 453816, 453798, 453784, 453804,
    453793, 453816, 453784, 453766, 453785,
  ];
  private redSpacePosition: number = 0;
  timerSubscription: Subscription | null = null;

  updateData() {
    let coverData = new Array(this.data.yaxisMaxNum).fill(null);
    const startIdx = this.inputChartOptions.series[0].markArea.data[0][0].xAxis;
    const endIdx = this.inputChartOptions.series[0].markArea.data[0][1].xAxis;
    this.data.data1.splice(
      startIdx,
      endIdx - startIdx,
      ...this.data.data2.slice(startIdx, endIdx)
    );
    this.inputChartOptions.yAxis.max = Math.max(...this.data.data1);
    this.inputChartOptions.yAxis.min = Math.min(...this.data.data1);

    this.data.data1
      .slice(startIdx, endIdx + 1)
      .forEach((value: any, index: any) => {
        coverData[startIdx + index] = value;
      });
    this.inputChartOptions.series[0].data = this.data.data1;
    this.inputChartOptions.series[1] = {
      data: coverData,
      type: 'line',
      itemStyle: {
        color: 'black',
      },
    };
  }

  updateMarkArea() {
    this.data.markAreaData = this.data.markAreaData.map((area) => {
      return area.map((point) => {
        return {
          xAxis: point.xAxis + this.data.perWindowMovingDistance,
        };
      });
    });
    if (this.data.markAreaData[0][1].xAxis > this.data.yaxisMaxNum) {
      this.data.markAreaData = [
        [{ xAxis: 0 }, { xAxis: this.data.perWindowMovingDistance }],
      ];
    }
    this.inputChartOptions.series[0].markArea.data = this.data.markAreaData;
  }

  ngOnInit(): void {
    this.initChart();
  }

  ngOnDestroy(): void {
    this.timerSubscription?.unsubscribe();
    if (this.chartInstance) {
      this.chartInstance.dispose();
      this.chartInstance = null;
    }
  }

  private initChart(): void {
    this.chartInstance = echarts.init(this.echartsDiv.nativeElement);
    this.chartInstance.setOption(this.inputChartOptions);
    this.timerSubscription = timer(
      this.data.updateFreq,
      this.data.updateFreq
    ).subscribe(() => {
      this.updateData();
      this.updateMarkArea();
      this.chartInstance.setOption(this.inputChartOptions);
    });
  }

}
